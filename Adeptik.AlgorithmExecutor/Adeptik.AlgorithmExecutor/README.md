# Исполнитель для .net core

Консольное приложение .net core для исполнения алгоритмов, реалихованное со спецификацией *Исполнителя*. Поддерживаются следующие *Среды исполнения*:
  - .net core 2.0.0

## Структура файлов в *Определении алгоритма*
Папка, содержащая реализацию *Алгоритма* на .net core в *Определении алгоритма* (в соответствии со спецификацией *Определения алгоритма* путь к данной папке "/runtimes/.netcoreX", где X - номер версии .net core) имеет следующую структуру:

  * libs
    * Library1.dll
    * Library2.dll
    * LibraryN.dll
    * AlgorithmImplementation.dll
  * entrypoint
  
В папке **libs** располагаются .netcore-библиотеки в формате dll, которые будут загружены при запуске *Алгоритма*. В данной папке может находится один или более dll-файл.
  
**entrypoint** - это текстовый файл в кодировке UTF-8, содержащий две строки - назввание файла основной сборки и полное имя статического метода, который является точкой входа.
Полное имя метода - это <пространство имен>.<имя класса>.<имя метода>. Например,`Adeptik.Algorithms.AlgorithmImpl.Run` указывает на статический метод "Run" класса "AlgorithmImpl", который располагается в пространстве имен "Adeptik.Algorithms". 

Данный метод будет вызван при запуске *Алгоритма*.
Данный метод обязан принимать единственный параметр типа `Adeptik.AlgorithmRuntime.IContext` (объявлен в [AlgorithmRuntime](../AlgorithmRuntime/README.md)).


## Установка

Для установки *Исполнителя* для .net core необходимо:

  1. Получить дистрибутив *Исполнителя* для .net core.
  2. Настроить *Агент* для .net core.
    
### Настройка Агента для Java под Windows

Полученный дистрибутив *Исполнителя* для .net core необходимо распаковать в любую папку на компьютере, где установлен *Агент* для Java.
В файле настроек *Агента* для Java необходимо добавить

```json
{
  "executors": [
    {
      "command": ["dotnet.exe", "<путь к основной dll исполнителя>"]
    }
    
    // другие исполнители
  ]
  
  // другие настройки агента
}
```
**Предупреждение:** В связи с тем, что *Агент* не может убить подпроцессы процесса Исполнителя ([PBI 1126](https://adeptik.visualstudio.com/AgentNetwork/_workitems?id=1126&_a=edit)), регистрация *Исполнителя* в *Агенте* с использованием промежуточных скриптов (bat, скрипт PowerShell и т.д.) недопустима.

## Использование Исполнителя

Аргументы командной строки соответствуют спецификации *Исполнителя*. Дополнительно реализованы следующие аргументы командной строки

  * --start --debug <файл настроек запуска>
  
### debug

Дополнительный параметр команды "--start". Если данный параметр указан при запуске *Исполнителя*, то при запуске решения *Задачи* в консоль дополнительно выводится информация для отладки:

  * Стек вызовов для необработанных *Определением алгоритма* исключений.

